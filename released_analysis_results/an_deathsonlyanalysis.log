------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  e:\analyses\covid-vs-noncovid-deaths-research\analysis/output/an_deathsonlyanalysis.log
  log type:  text
 opened on:  14 Dec 2020, 18:55:12

. 
. use  ./analysis/cr_create_analysis_dataset_MAIN_STSET.dta, clear

. 
. keep if _d==1
(17,305,136 observations deleted)

. 
. safetab onsdeath

Failure/cen |
     soring |
  indicator |
        for |
   outcome: |
  ONS death |
 (1 = covid |
  death 2 = |
   other de |      Freq.     Percent        Cum.
------------+-----------------------------------
      covid |     17,063       11.27       11.27
     cancer |     40,366       26.67       37.94
        cvd |     34,429       22.74       60.68
    dem_alz |     16,899       11.16       71.84
respiratory |     15,290       10.10       81.94
      other |     27,332       18.06      100.00
------------+-----------------------------------
      Total |    151,379      100.00

. safetab agegroup onsdeath, col

**TABLE OF agegroup onsdeath REDACTED DUE TO SMALL N**


. safetab male onsdeath, col

+-------------------+
| Key               |
|-------------------|
|     frequency     |
| column percentage |
+-------------------+

           |   Failure/censoring indicator for outcome: ONS death (1 = covid
           |                        death 2 = other de
      Male |     covid     cancer        cvd    dem_alz  respirato      other |     Total
-----------+------------------------------------------------------------------+----------
         0 |     7,617     18,678     15,974     11,228      7,399     14,495 |    75,391 
           |     44.64      46.27      46.40      66.44      48.39      53.03 |     49.80 
-----------+------------------------------------------------------------------+----------
         1 |     9,446     21,688     18,455      5,671      7,891     12,837 |    75,988 
           |     55.36      53.73      53.60      33.56      51.61      46.97 |     50.20 
-----------+------------------------------------------------------------------+----------
     Total |    17,063     40,366     34,429     16,899     15,290     27,332 |   151,379 
           |    100.00     100.00     100.00     100.00     100.00     100.00 |    100.00 

. 
. gen coviddeath = onsdeath==1

. 
. **UNIVARIATE
. foreach var of any                                                      ///
>                 agelinsex                                                       ///
>                 agegroupsex                                                     ///
>                 agesplsex                                                       ///
>                 asthmacat                                                       ///
>                 cancer_exhaem_cat                                       ///
>                 cancer_haem_cat                                         ///
>                 chronic_cardiac_disease                         ///
>                 reduced_kidney_function_cat2            ///
>                 dialysis                                                        ///
>                 chronic_liver_disease                           ///
>                 chronic_respiratory_disease             ///
>                 diabcat                                                         ///
>                 ethnicity                                                       ///
>                 htdiag_or_highbp                                        ///
>                 imd                                                             ///
>                 obese4cat                                                       ///
>                 organ_transplant                                        ///
>                 other_immunosuppression                         ///
>                 other_neuro                                             ///
>                 ra_sle_psoriasis                                        ///  
>                 smoke                                                           ///
>                 smoke_nomiss                                            ///
>                 spleen                                                          ///
>                 stroke                                                          ///
>                 dementia {
  2.         *Special cases
.         if "`var'"=="agesplsex" local model "age1 age2 age3 i.male"
  3.         else if "`var'"=="agegroupsex" local model "ib3.agegroup i.male"
  4.         else if "`var'"=="bmicat" local model "age1 age2 age3 i.male ib2.bmicat"
  5.         else if "`var'"=="agelinsex" local model "age i.male"
  6.         *General form of model
.         else local model "age1 age2 age3 i.male i.`var'"
  7. 
.         *Fit and save model
.         cap erase ./analysis/output/models/an_deathsonlyanalysis_AGESEX_`var'.ster
  8.         capture logistic coviddeath `model'
  9.         if _rc==0 {
 10.                 estimates
 11.                 estimates save ./analysis/output/models/an_deathsonlyanalysis_AGESEX_`var', replace
 12.                 }
 13.         else di "WARNING - `var' vs `outcome' MODEL DID NOT SUCCESSFULLY FIT"
 14. 
. }

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(2)        =     462.18
                                                Prob > chi2       =     0.0000
Log likelihood =  -53078.33                     Pseudo R2         =     0.0043

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   1.010774   .0006894    15.71   0.000     1.009424    1.012126
      1.male |   1.317151   .0218247    16.63   0.000     1.275062    1.360628
       _cons |   .0467971   .0026899   -53.27   0.000     .0418112    .0523776
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_agelinsex.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_agelinsex.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(6)        =     532.22
                                                Prob > chi2       =     0.0000
Log likelihood = -53043.308                     Pseudo R2         =     0.0050

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
    agegroup |
     18-<40  |   .5571634    .070389    -4.63   0.000     .4349571     .713705
     40-<50  |   .8649118    .068689    -1.83   0.068     .7402384    1.010583
     60-<70  |   1.099211   .0514051     2.02   0.043     1.002939    1.204725
     70-<80  |   1.285156   .0543757     5.93   0.000     1.182881    1.396274
        80+  |   1.479548   .0596152     9.72   0.000     1.367199     1.60113
             |
      1.male |    1.30704   .0215783    16.22   0.000     1.265424    1.350024
       _cons |   .0823784   .0033182   -61.98   0.000     .0761249    .0891456
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_agegroupsex.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_agegroupsex.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(4)        =     489.25
                                                Prob > chi2       =     0.0000
Log likelihood = -53064.797                     Pseudo R2         =     0.0046

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        age1 |   1.022338    .016564     1.36   0.173      .990383    1.055324
        age2 |   1.012584   .0363264     0.35   0.727     .9438314    1.086345
        age3 |   .9374404   .0785451    -0.77   0.441     .7954708    1.104748
      1.male |   1.307253   .0217484    16.10   0.000     1.265315    1.350582
       _cons |   .0227452   .0133178    -6.46   0.000     .0072193    .0716614
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_agesplsex.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_agesplsex.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(6)        =     549.01
                                                Prob > chi2       =     0.0000
Log likelihood = -53034.915                     Pseudo R2         =     0.0051

-------------------------------------------------------------------------------
   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
         age1 |   1.022747   .0165952     1.39   0.166     .9907328    1.055796
         age2 |   1.012008   .0363518     0.33   0.740     .9432102    1.085824
         age3 |   .9390672   .0787737    -0.75   0.454     .7966978    1.106878
       1.male |   1.317289   .0219619    16.53   0.000      1.27494    1.361045
              |
    asthmacat |
 Yes, no OCS  |   1.135118    .029617     4.86   0.000     1.078529    1.194676
Yes with OCS  |   1.362782   .0642974     6.56   0.000     1.242412    1.494813
              |
        _cons |   .0215913   .0126629    -6.54   0.000     .0068401    .0681543
-------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_asthmacat.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_asthmacat.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(7)        =    2335.78
                                                Prob > chi2       =     0.0000
Log likelihood = -52141.532                     Pseudo R2         =     0.0219

-----------------------------------------------------------------------------------
       coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------+----------------------------------------------------------------
             age1 |   1.020568   .0164051     1.27   0.205     .9889154    1.053233
             age2 |   1.034031   .0369064     0.94   0.348     .9641682    1.108956
             age3 |   .8729824   .0728686    -1.63   0.104     .7412334    1.028149
           1.male |   1.332992   .0223531    17.14   0.000     1.289893    1.377531
                  |
cancer_exhaem_cat |
       Last year  |   .2049471   .0122174   -26.59   0.000     .1823474    .2303478
   2-5 years ago  |   .3805792   .0155813   -23.60   0.000     .3512335    .4123766
        5+ years  |   .6659708    .017631   -15.36   0.000      .632296    .7014391
                  |
            _cons |   .0265177   .0153894    -6.25   0.000     .0085024    .0827041
-----------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_cancer_exhaem_cat.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_cancer_exhaem_cat.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(7)        =     514.31
                                                Prob > chi2       =     0.0000
Log likelihood = -53052.266                     Pseudo R2         =     0.0048

---------------------------------------------------------------------------------
     coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
           age1 |     1.0215   .0165279     1.31   0.189     .9896137    1.054413
           age2 |   1.014975    .036376     0.41   0.678     .9461262    1.088835
           age3 |   .9317348   .0780038    -0.84   0.398     .7907344    1.097878
         1.male |   1.309298   .0217908    16.19   0.000     1.267277    1.352711
                |
cancer_haem_cat |
     Last year  |   .5517738   .0745681    -4.40   0.000     .4233773    .7191088
 2-5 years ago  |   .8973458   .0736485    -1.32   0.187     .7640091    1.053953
      5+ years  |   .9570367   .0621755    -0.68   0.499     .8426144    1.086997
                |
          _cons |   .0234376   .0137032    -6.42   0.000     .0074515    .0737197
---------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_cancer_haem_cat.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_cancer_haem_cat.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     489.25
                                                Prob > chi2       =     0.0000
Log likelihood = -53064.796                     Pseudo R2         =     0.0046

-------------------------------------------------------------------------------------------
               coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
--------------------------+----------------------------------------------------------------
                     age1 |   1.022343   .0165655     1.36   0.173     .9903858    1.055332
                     age2 |   1.012561   .0363356     0.35   0.728     .9437912    1.086341
                     age3 |   .9374929   .0785728    -0.77   0.441     .7954766    1.104863
                   1.male |   1.307182   .0218977    15.99   0.000      1.26496    1.350813
1.chronic_cardiac_disease |   1.000481   .0173231     0.03   0.978     .9670977    1.035016
                    _cons |    .022742   .0133165    -6.46   0.000     .0072179    .0716552
-------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_chronic_cardiac_disease.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_chronic_cardiac_disease.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(7)        =     562.96
                                                Prob > chi2       =     0.0000
Log likelihood = -53027.942                     Pseudo R2         =     0.0053

-----------------------------------------------------------------------------------------------
                   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.021827   .0165446     1.33   0.182     .9899095    1.054774
                         age2 |   1.013671   .0363465     0.38   0.705     .9448789    1.087472
                         age3 |   .9310262   .0779785    -0.85   0.393     .7900766    1.097121
                       1.male |    1.30599   .0217348    16.04   0.000     1.264078    1.349292
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |    1.16285   .0216313     8.11   0.000     1.121217    1.206029
         Stage 4 egfr 15-<30  |   1.112412   .0400561     2.96   0.003      1.03661    1.193757
Stage 5 egfr <15 or dialysis  |   1.231684   .0698589     3.67   0.000       1.1021    1.376506
                              |
                        _cons |   .0229527   .0134296    -6.45   0.000     .0072912    .0722556
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_reduced_kidney_function_cat2.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_reduced_kidney_function_cat2.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     513.05
                                                Prob > chi2       =     0.0000
Log likelihood = -53052.898                     Pseudo R2         =     0.0048

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        age1 |   1.022146   .0165567     1.35   0.176     .9902052    1.055117
        age2 |   1.012728   .0363242     0.35   0.724     .9439783    1.086484
        age3 |   .9377579    .078558    -0.77   0.443     .7957629     1.10509
      1.male |   1.305599   .0217257    16.02   0.000     1.263704    1.348882
  1.dialysis |   1.436371   .1023597     5.08   0.000      1.24913    1.651678
       _cons |   .0227555   .0133201    -6.46   0.000     .0072248     .071671
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_dialysis.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_dialysis.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     558.72
                                                Prob > chi2       =     0.0000
Log likelihood = -53030.063                     Pseudo R2         =     0.0052

-----------------------------------------------------------------------------------------
             coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                   age1 |   1.025697   .0166401     1.56   0.118     .9935965    1.058835
                   age2 |   1.003526   .0360486     0.10   0.922     .9353015    1.076726
                   age3 |   .9571255   .0802948    -0.52   0.601     .8120078    1.128178
                 1.male |   1.308343   .0217682    16.15   0.000     1.266366    1.351711
1.chronic_liver_disease |   .6051635   .0390417    -7.79   0.000     .5332835    .6867321
                  _cons |   .0211631   .0124062    -6.58   0.000      .006708     .066768
-----------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_chronic_liver_disease.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_chronic_liver_disease.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     491.39
                                                Prob > chi2       =     0.0000
Log likelihood = -53063.728                     Pseudo R2         =     0.0046

-----------------------------------------------------------------------------------------------
                   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.021599   .0165395     1.32   0.187     .9896916    1.054536
                         age2 |   1.015421   .0364441     0.43   0.670     .9464462    1.089422
                         age3 |   .9303106   .0780314    -0.86   0.389     .7892815    1.096539
                       1.male |   1.308562   .0217902    16.15   0.000     1.266544    1.351975
1.chronic_respiratory_disease |   .9710561   .0195491    -1.46   0.145     .9334867    1.010138
                        _cons |   .0232404   .0135942    -6.43   0.000     .0073849    .0731383
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_chronic_respiratory_disease.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_chronic_respiratory_disease.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(7)        =     823.27
                                                Prob > chi2       =     0.0000
Log likelihood = -52897.786                     Pseudo R2         =     0.0077

---------------------------------------------------------------------------------------------
                 coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
----------------------------+----------------------------------------------------------------
                       age1 |   1.025908   .0167581     1.57   0.117      .993583    1.059285
                       age2 |   .9930659   .0358826    -0.19   0.847     .9251699    1.065945
                       age3 |   .9920348   .0836845    -0.09   0.924     .8408579    1.170392
                     1.male |   1.284347   .0214361    14.99   0.000     1.243013    1.327056
                            |
                    diabcat |
       Controlled diabetes  |    1.27176   .0263049    11.62   0.000     1.221234    1.324376
     Uncontrolled diabetes  |   1.548579   .0416101    16.28   0.000     1.469135    1.632319
Diabetes, no hba1c measure  |   1.239141   .0530078     5.01   0.000     1.139484    1.347514
                            |
                      _cons |     .02023   .0119477    -6.60   0.000     .0063574    .0643738
---------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_diabcat.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_diabcat.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    108,070
                                                LR chi2(8)        =    1201.09
                                                Prob > chi2       =     0.0000
Log likelihood = -38637.915                     Pseudo R2         =     0.0153

-----------------------------------------------------------------------------------------
             coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                   age1 |   1.014549   .0190369     0.77   0.441     .9779152    1.052555
                   age2 |   1.039467   .0430529     0.93   0.350     .9584191    1.127369
                   age3 |   .8792917   .0849448    -1.33   0.183     .7276153    1.062586
                 1.male |   1.262172   .0244489    12.02   0.000     1.215152    1.311013
                        |
              ethnicity |
                 Mixed  |   1.969408    .250257     5.33   0.000     1.535224    2.526386
Asian or Asian British  |   2.968024     .11689    27.62   0.000     2.747543    3.206198
                 Black  |   2.576929   .1705931    14.30   0.000     2.263356    2.933946
                 Other  |   2.269436   .2144452     8.67   0.000     1.885756     2.73118
                        |
                  _cons |   .0257907   .0175094    -5.39   0.000     .0068168     .097577
-----------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_ethnicity.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_ethnicity.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     493.46
                                                Prob > chi2       =     0.0000
Log likelihood =  -53062.69                     Pseudo R2         =     0.0046

------------------------------------------------------------------------------------
        coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------------+----------------------------------------------------------------
              age1 |   1.022103   .0165659     1.35   0.177     .9901451    1.055093
              age2 |   1.011518   .0363002     0.32   0.750     .9428151    1.085227
              age3 |   .9405855   .0788388    -0.73   0.465     .7980894    1.108524
            1.male |   1.308226   .0217718    16.14   0.000     1.266243    1.351602
1.htdiag_or_highbp |   1.039458    .019642     2.05   0.041     1.001665    1.078678
             _cons |   .0227352   .0133166    -6.46   0.000     .0072132    .0716588
------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_htdiag_or_highbp.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_htdiag_or_highbp.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(8)        =     806.01
                                                Prob > chi2       =     0.0000
Log likelihood = -52906.417                     Pseudo R2         =     0.0076

----------------------------------------------------------------------------------
      coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-----------------+----------------------------------------------------------------
            age1 |   1.020602   .0165696     1.26   0.209     .9886377      1.0536
            age2 |   1.019445   .0366486     0.54   0.592     .9500871    1.093866
            age3 |   .9236221    .077545    -0.95   0.344     .7834829    1.088827
          1.male |   1.314437    .021904    16.41   0.000       1.2722    1.358077
                 |
             imd |
              2  |   1.042104   .0283967     1.51   0.130     .9879072    1.099273
              3  |   1.074832   .0290699     2.67   0.008      1.01934    1.133345
              4  |   1.283939   .0338808     9.47   0.000     1.219222    1.352091
5 most deprived  |   1.466167   .0383177    14.64   0.000     1.392957    1.543226
                 |
           _cons |   .0192087   .0112743    -6.73   0.000     .0060799    .0606874
----------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_imd.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_imd.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(7)        =    1086.27
                                                Prob > chi2       =     0.0000
Log likelihood = -52766.287                     Pseudo R2         =     0.0102

-------------------------------------------------------------------------------------
         coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
--------------------+----------------------------------------------------------------
               age1 |   1.022903   .0166833     1.39   0.165     .9907213     1.05613
               age2 |   1.001447   .0361442     0.04   0.968     .9330534    1.074854
               age3 |   .9776145   .0823871    -0.27   0.788     .8287696    1.153192
             1.male |   1.330861   .0222494    17.10   0.000      1.28796    1.375192
                    |
          obese4cat |
 Obese I (30-34.9)  |   1.483851   .0339763    17.24   0.000     1.418731     1.55196
Obese II (35-39.9)  |   1.752768    .059483    16.54   0.000     1.639977    1.873317
   Obese III (40+)  |   1.918492   .0882921    14.16   0.000     1.753018    2.099586
                    |
              _cons |   .0198137   .0116805    -6.65   0.000     .0062398    .0629161
-------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_obese4cat.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_obese4cat.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     506.57
                                                Prob > chi2       =     0.0000
Log likelihood = -53056.135                     Pseudo R2         =     0.0048

------------------------------------------------------------------------------------
        coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------------+----------------------------------------------------------------
              age1 |    1.02207    .016548     1.35   0.178     .9901456    1.055024
              age2 |   1.013436   .0363387     0.37   0.710     .9446587    1.087221
              age3 |    .935745   .0783703    -0.79   0.428     .7940866    1.102674
            1.male |    1.30667   .0217417    16.08   0.000     1.264744    1.349985
1.organ_transplant |   1.647579   .1869576     4.40   0.000     1.319037    2.057954
             _cons |   .0227553   .0133133    -6.47   0.000      .007229    .0716289
------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_organ_transplant.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_organ_transplant.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     489.76
                                                Prob > chi2       =     0.0000
Log likelihood = -53064.541                     Pseudo R2         =     0.0046

-------------------------------------------------------------------------------------------
               coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
--------------------------+----------------------------------------------------------------
                     age1 |   1.022334   .0165643     1.36   0.173     .9903784     1.05532
                     age2 |   1.012523   .0363249     0.35   0.729     .9437727    1.086281
                     age3 |   .9375885   .0785591    -0.77   0.442     .7955939    1.104926
                   1.male |   1.307313   .0217495    16.11   0.000     1.265372    1.350644
1.other_immunosuppression |   .9144367   .1156545    -0.71   0.479     .7136691    1.171684
                    _cons |   .0227834   .0133405    -6.46   0.000     .0072311    .0717842
-------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_other_immunosuppression.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_other_immunosuppression.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     529.88
                                                Prob > chi2       =     0.0000
Log likelihood = -53044.483                     Pseudo R2         =     0.0050

-------------------------------------------------------------------------------
   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
--------------+----------------------------------------------------------------
         age1 |   1.024598   .0166272     1.50   0.134     .9925217     1.05771
         age2 |   1.006123   .0361438     0.17   0.865     .9377186    1.079517
         age3 |   .9529261   .0799446    -0.57   0.565     .8084417    1.123233
       1.male |   1.304384   .0217062    15.97   0.000     1.262527    1.347629
1.other_neuro |   1.249239   .0425986     6.53   0.000     1.168477    1.335584
        _cons |   .0210235   .0123314    -6.58   0.000     .0066593    .0663713
-------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_other_neuro.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_other_neuro.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     500.72
                                                Prob > chi2       =     0.0000
Log likelihood = -53059.062                     Pseudo R2         =     0.0047

------------------------------------------------------------------------------------
        coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------------+----------------------------------------------------------------
              age1 |   1.022762   .0165925     1.39   0.165     .9907524    1.055805
              age2 |   1.010737   .0363026     0.30   0.766      .942032    1.084453
              age3 |   .9423162   .0790417    -0.71   0.479     .7994617    1.110697
            1.male |   1.309742   .0218027    16.21   0.000     1.267699    1.353179
1.ra_sle_psoriasis |   1.102561   .0314678     3.42   0.001     1.042579    1.165995
             _cons |   .0223447   .0131013    -6.48   0.000     .0070809    .0705112
------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_ra_sle_psoriasis.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_ra_sle_psoriasis.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    150,386
                                                LR chi2(6)        =    1129.03
                                                Prob > chi2       =     0.0000
Log likelihood = -52378.555                     Pseudo R2         =     0.0107

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        age1 |   1.032279   .0177464     1.85   0.065     .9980759    1.067654
        age2 |   .9782853   .0370006    -0.58   0.562     .9083881    1.053561
        age3 |   1.015666   .0894059     0.18   0.860     .8547169    1.206923
      1.male |   1.307335   .0222907    15.72   0.000     1.264368    1.351763
             |
       smoke |
     Former  |   1.032606   .0188037     1.76   0.078     .9964018    1.070126
    Current  |   .4687853    .016518   -21.50   0.000     .4375032    .5023041
             |
       _cons |   .0219589   .0136668    -6.14   0.000     .0064839    .0743676
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_smoke.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_smoke.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(6)        =    1141.80
                                                Prob > chi2       =     0.0000
Log likelihood = -52738.523                     Pseudo R2         =     0.0107

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        age1 |   1.038189   .0171058     2.27   0.023     1.005197    1.072263
        age2 |   .9679635   .0352497    -0.89   0.371     .9012832    1.039577
        age3 |   1.039617   .0883283     0.46   0.647     .8801431    1.227986
      1.male |   1.307209   .0222095    15.77   0.000     1.264396    1.351471
             |
smoke_nomiss |
     Former  |   1.030872   .0186434     1.68   0.093      .994972    1.068068
    Current  |   .4697002   .0165113   -21.50   0.000     .4384284    .5032026
             |
       _cons |   .0174924   .0104204    -6.79   0.000     .0054423    .0562238
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_smoke_nomiss.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_smoke_nomiss.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     493.59
                                                Prob > chi2       =     0.0000
Log likelihood = -53062.624                     Pseudo R2         =     0.0046

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        age1 |   1.022474   .0165695     1.37   0.170     .9905083     1.05547
        age2 |   1.012277   .0363211     0.34   0.734     .9435341    1.086027
        age3 |   .9380229   .0786048    -0.76   0.445      .795947    1.105459
      1.male |   1.307218   .0217483    16.10   0.000      1.26528    1.350547
    1.spleen |   .7585085   .1044578    -2.01   0.045     .5790786    .9935356
       _cons |   .0226905   .0132884    -6.46   0.000     .0072003    .0715055
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_spleen.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_spleen.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     529.21
                                                Prob > chi2       =     0.0000
Log likelihood = -53044.815                     Pseudo R2         =     0.0050

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        age1 |   1.022976   .0165931     1.40   0.161     .9909656     1.05602
        age2 |   1.009936   .0362679     0.28   0.783     .9412962    1.083581
        age3 |    .943151   .0790968    -0.70   0.485     .8001949    1.111647
      1.male |   1.303494   .0216969    15.92   0.000     1.261655    1.346721
    1.stroke |   1.150211   .0251797     6.39   0.000     1.101903    1.200636
       _cons |   .0223282   .0130891    -6.49   0.000     .0070773    .0704432
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_stroke.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_stroke.ster saved

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(5)        =     663.79
                                                Prob > chi2       =     0.0000
Log likelihood = -52977.525                     Pseudo R2         =     0.0062

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        age1 |   1.023386   .0166145     1.42   0.154     .9913346    1.056473
        age2 |   1.009656   .0362816     0.27   0.789     .9409919    1.083331
        age3 |   .9421633   .0790601    -0.71   0.478     .7992801    1.110589
      1.male |   1.310725   .0218261    16.25   0.000     1.268637    1.354209
  1.dementia |   1.541489    .048482    13.76   0.000     1.449336    1.639502
       _cons |   .0220191   .0129206    -6.50   0.000     .0069714    .0695469
------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
(note: file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_dementia.ster not found)
file ./analysis/output/models/an_deathsonlyanalysis_AGESEX_dementia.ster saved

. 
. 
. **MULTIVARIATE
. cap prog drop baselogistic 

. prog define baselogistic
  1.         syntax , age(string) bp(string) [ethnicity(real 0) if(string)] 
  2. 
.         if `ethnicity'==1 local ethnicity "i.ethnicity"
  3.         else local ethnicity
  4. 
. cap logistic coviddeath `age'                   ///
>                         i.male                                                  ///
>                         i.obese4cat                                             ///
>                         i.smoke_nomiss                                  ///
>                         `ethnicity'                                             ///
>                         i.imd                                                   ///
>                         `bp'                                                    ///
>                         i.chronic_respiratory_disease   ///
>                         i.asthmacat                                             ///
>                         i.chronic_cardiac_disease               ///
>                         i.diabcat                                               ///
>                         i.cancer_exhaem_cat                             ///
>                         i.cancer_haem_cat                               ///
>                         i.chronic_liver_disease                 ///
>                         i.stroke                                                ///
>                         i.dementia                                              ///
>                         i.other_neuro                                   ///
>                         i.reduced_kidney_function_cat2  ///
>                         i.organ_transplant                              ///
>                         i.spleen                                                ///
>                         i.ra_sle_psoriasis                      ///
>                         i.other_immunosuppression
  5.                         
. end                     

. 
. baselogistic, age("age1 age2 age3")  bp("i.htdiag_or_highbp") ethnicity(0)

. if _rc==0{
. estimates

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(38)       =    4273.51
                                                Prob > chi2       =     0.0000
Log likelihood = -51172.667                     Pseudo R2         =     0.0401

-----------------------------------------------------------------------------------------------
                   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.041338   .0172331     2.45   0.014     1.008104    1.075668
                         age2 |   .9663089   .0354892    -0.93   0.351     .8991958    1.038431
                         age3 |   1.039049   .0892122     0.45   0.655     .8781169    1.229475
                       1.male |   1.372277   .0239921    18.10   0.000      1.32605    1.420116
                              |
                    obese4cat |
           Obese I (30-34.9)  |   1.372283   .0323713    13.42   0.000     1.310281     1.43722
          Obese II (35-39.9)  |   1.539742   .0538457    12.34   0.000     1.437741    1.648978
             Obese III (40+)  |   1.563829   .0739992     9.45   0.000     1.425316    1.715803
                              |
                 smoke_nomiss |
                      Former  |     1.0195   .0190717     1.03   0.302     .9827974    1.057574
                     Current  |   .4675707   .0169172   -21.01   0.000     .4355618    .5019318
                              |
                          imd |
                           2  |   1.029948   .0283334     1.07   0.283     .9758865    1.087005
                           3  |   1.052692   .0287766     1.88   0.060     .9977757    1.110632
                           4  |   1.252895   .0335158     8.43   0.000     1.188898    1.320338
             5 most deprived  |    1.44132   .0384472    13.70   0.000     1.367901    1.518679
                              |
           1.htdiag_or_highbp |   .9311593   .0182206    -3.65   0.000     .8961237    .9675646
1.chronic_respiratory_disease |   .9756966   .0207433    -1.16   0.247     .9358759    1.017212
                              |
                    asthmacat |
                 Yes, no OCS  |   1.079733   .0286789     2.89   0.004     1.024961    1.137432
                Yes with OCS  |   1.295931   .0628671     5.34   0.000     1.178391    1.425197
                              |
    1.chronic_cardiac_disease |   .8821736   .0160002    -6.91   0.000     .8513646    .9140976
                              |
                      diabcat |
         Controlled diabetes  |   1.179848   .0253745     7.69   0.000     1.131149    1.230645
       Uncontrolled diabetes  |   1.343122   .0378084    10.48   0.000     1.271026    1.419307
  Diabetes, no hba1c measure  |   1.144266    .049706     3.10   0.002     1.050876    1.245956
                              |
            cancer_exhaem_cat |
                   Last year  |   .2171036   .0129913   -25.52   0.000     .1930775    .2441195
               2-5 years ago  |   .3885113   .0160025   -22.95   0.000     .3583796    .4211764
                    5+ years  |   .6713621   .0178975   -14.95   0.000     .6371843    .7073731
                              |
              cancer_haem_cat |
                   Last year  |   .5379598   .0733379    -4.55   0.000     .4118215    .7027336
               2-5 years ago  |    .895389   .0742766    -1.33   0.183     .7610282    1.053472
                    5+ years  |   .9767347   .0642799    -0.36   0.721     .8585354    1.111207
                              |
      1.chronic_liver_disease |   .5750341   .0375676    -8.47   0.000     .5059221    .6535872
                     1.stroke |   1.069349   .0241058     2.97   0.003     1.023131    1.117655
                   1.dementia |   1.399728   .0449388    10.47   0.000     1.314364    1.490637
                1.other_neuro |   1.130733   .0392778     3.54   0.000     1.056312    1.210397
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |    1.09677   .0209453     4.84   0.000     1.056477      1.1386
         Stage 4 egfr 15-<30  |   1.003812   .0371387     0.10   0.918     .9335982    1.079307
Stage 5 egfr <15 or dialysis  |   .9881829   .0612085    -0.19   0.848     .8752125    1.115735
                              |
           1.organ_transplant |   1.589976   .1967193     3.75   0.000     1.247602    2.026307
                     1.spleen |   .8533629   .1191857    -1.14   0.256     .6490078    1.122064
           1.ra_sle_psoriasis |    1.10063   .0319054     3.31   0.001     1.039839    1.164974
    1.other_immunosuppression |   1.021861   .1316777     0.17   0.867     .7937899    1.315462
                        _cons |   .0132662   .0079306    -7.23   0.000     .0041105    .0428154
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_deathsonlyanalysis_FULL_agespline_bmicat_noeth, replace
file ./analysis/output/models/an_deathsonlyanalysis_FULL_agespline_bmicat_noeth.ster saved
. }

. else di "WARNING AGE SPLINE MODEL DID NOT FIT (OUTCOME `outcome')"

.  
. *Age group model (not adj ethnicity)
. baselogistic, age("ib3.agegroup") bp("i.htdiag_or_highbp") ethnicity(0)

. if _rc==0{
. estimates

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(40)       =    4286.16
                                                Prob > chi2       =     0.0000
Log likelihood = -51166.343                     Pseudo R2         =     0.0402

-----------------------------------------------------------------------------------------------
                   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                     agegroup |
                      18-<40  |   .5313328   .0678321    -4.95   0.000     .4137126    .6823929
                      40-<50  |    .883834   .0713457    -1.53   0.126     .7544999    1.035338
                      60-<70  |   1.059824   .0507117     1.21   0.225     .9649496    1.164027
                      70-<80  |   1.159019   .0512209     3.34   0.001     1.062853    1.263887
                         80+  |   1.245606   .0545242     5.02   0.000     1.143196     1.35719
                              |
                       1.male |   1.377449   .0239375    18.43   0.000     1.331322    1.425174
                              |
                    obese4cat |
           Obese I (30-34.9)  |   1.381353    .032454    13.75   0.000     1.319187    1.446449
          Obese II (35-39.9)  |   1.558408   .0543449    12.72   0.000     1.455453    1.668647
             Obese III (40+)  |   1.592129   .0751634     9.85   0.000     1.451422    1.746478
                              |
                 smoke_nomiss |
                      Former  |   1.021319   .0191118     1.13   0.260      .984539    1.059473
                     Current  |    .473749   .0171051   -20.69   0.000     .4413823     .508489
                              |
                          imd |
                           2  |   1.030818   .0283595     1.10   0.270     .9767063    1.087927
                           3  |   1.054364    .028825     1.94   0.053     .9993548    1.112401
                           4  |   1.255979   .0335979     8.52   0.000     1.191825    1.323587
             5 most deprived  |   1.446526   .0385764    13.84   0.000     1.372859    1.524145
                              |
           1.htdiag_or_highbp |   .9289449    .018175    -3.77   0.000     .8939969     .965259
1.chronic_respiratory_disease |   .9771239   .0207497    -1.09   0.276       .93729    1.018651
                              |
                    asthmacat |
                 Yes, no OCS  |   1.079717   .0286731     2.89   0.004     1.024957    1.137404
                Yes with OCS  |   1.298398   .0629839     5.38   0.000     1.180639    1.427903
                              |
    1.chronic_cardiac_disease |   .8790972   .0159434    -7.11   0.000     .8483976    .9109078
                              |
                      diabcat |
         Controlled diabetes  |    1.18055   .0253605     7.73   0.000     1.131876    1.231317
       Uncontrolled diabetes  |    1.34924    .037862    10.67   0.000     1.277035    1.425527
  Diabetes, no hba1c measure  |   1.145243   .0497505     3.12   0.002     1.051769    1.247024
                              |
            cancer_exhaem_cat |
                   Last year  |    .219123    .013105   -25.38   0.000     .1948858    .2463744
               2-5 years ago  |   .3910163   .0160897   -22.82   0.000     .3607193     .423858
                    5+ years  |   .6703608   .0178771   -15.00   0.000     .6362223    .7063312
                              |
              cancer_haem_cat |
                   Last year  |   .5412109   .0737758    -4.50   0.000     .4143182    .7069668
               2-5 years ago  |   .8993503   .0745853    -1.28   0.201     .7644281    1.058086
                    5+ years  |   .9773353   .0643117    -0.35   0.728     .8590765    1.111873
                              |
      1.chronic_liver_disease |   .5811775   .0379593    -8.31   0.000     .5113438    .6605483
                     1.stroke |   1.066471   .0240387     2.86   0.004     1.020382    1.114642
                   1.dementia |   1.389446   .0446429    10.24   0.000     1.304645    1.479758
                1.other_neuro |   1.132823   .0393026     3.59   0.000     1.058352    1.212534
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |   1.085345   .0204893     4.34   0.000      1.04592    1.126255
         Stage 4 egfr 15-<30  |   .9921929   .0365416    -0.21   0.831     .9230965    1.066461
Stage 5 egfr <15 or dialysis  |   .9870206   .0611303    -0.21   0.833     .8741939    1.114409
                              |
           1.organ_transplant |   1.618714    .200296     3.89   0.000     1.270119    2.062985
                     1.spleen |   .8554307   .1194804    -1.12   0.264     .6505716    1.124798
           1.ra_sle_psoriasis |   1.103227   .0319688     3.39   0.001     1.042316    1.167699
    1.other_immunosuppression |   1.028265   .1324698     0.22   0.829     .7988149    1.323622
                        _cons |   .0873317   .0042726   -49.83   0.000     .0793466    .0961205
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_deathsonlyanalysis_FULL_agegroup_bmicat_noeth, replace
file ./analysis/output/models/an_deathsonlyanalysis_FULL_agegroup_bmicat_noeth.ster saved
. }

. else di "WARNING GROUP MODEL DID NOT FIT (OUTCOME `outcome')"

. 
. *Age lin  model (not adj ethnicity)
. baselogistic, age("age") bp("i.htdiag_or_highbp") ethnicity(0)

. if _rc==0{
. estimates

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(36)       =    4236.65
                                                Prob > chi2       =     0.0000
Log likelihood = -51191.095                     Pseudo R2         =     0.0397

-----------------------------------------------------------------------------------------------
                   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                          age |   1.006107   .0008292     7.39   0.000     1.004483    1.007734
                       1.male |   1.380595   .0240911    18.48   0.000     1.334175    1.428629
                              |
                    obese4cat |
           Obese I (30-34.9)  |   1.386498   .0326097    13.89   0.000     1.324035    1.451908
          Obese II (35-39.9)  |    1.55978   .0544245    12.74   0.000     1.456676    1.670182
             Obese III (40+)  |   1.585847   .0749112     9.76   0.000     1.445615    1.739682
                              |
                 smoke_nomiss |
                      Former  |   1.026297   .0191604     1.39   0.164     .9894225    1.064547
                     Current  |    .471288   .0170305   -20.82   0.000     .4390635    .5058776
                              |
                          imd |
                           2  |    1.03036   .0283443     1.09   0.277     .9762777    1.087439
                           3  |    1.05304   .0287852     1.89   0.059      .998107    1.110997
                           4  |   1.253065   .0335181     8.43   0.000     1.189063    1.320512
             5 most deprived  |   1.441387   .0384476    13.71   0.000     1.367967    1.518748
                              |
           1.htdiag_or_highbp |   .9367931   .0183366    -3.34   0.001     .9015347    .9734303
1.chronic_respiratory_disease |   .9858777   .0208408    -0.67   0.501     .9458651    1.027583
                              |
                    asthmacat |
                 Yes, no OCS  |    1.07621   .0285718     2.77   0.006     1.021642    1.133692
                Yes with OCS  |   1.295924   .0628529     5.34   0.000     1.178408    1.425158
                              |
    1.chronic_cardiac_disease |   .8818357   .0159965    -6.93   0.000     .8510338    .9137523
                              |
                      diabcat |
         Controlled diabetes  |   1.189069   .0255066     8.07   0.000     1.140113    1.240127
       Uncontrolled diabetes  |   1.359302   .0381502    10.94   0.000     1.286548    1.436169
  Diabetes, no hba1c measure  |   1.146418   .0497917     3.15   0.002     1.052866    1.248282
                              |
            cancer_exhaem_cat |
                   Last year  |   .2200671    .013158   -25.32   0.000     .1957318    .2474281
               2-5 years ago  |   .3926109   .0161546   -22.72   0.000     .3621915    .4255851
                    5+ years  |   .6735608   .0179539   -14.83   0.000     .6392752    .7096851
                              |
              cancer_haem_cat |
                   Last year  |   .5432134    .074036    -4.48   0.000     .4158704    .7095499
               2-5 years ago  |   .9051468   .0750447    -1.20   0.229     .7693906    1.064857
                    5+ years  |   .9842509   .0647581    -0.24   0.809     .8651703    1.119722
                              |
      1.chronic_liver_disease |   .5770834   .0376839    -8.42   0.000     .5077554    .6558772
                     1.stroke |   1.068528   .0240896     2.94   0.003     1.022342    1.116802
                   1.dementia |   1.396286   .0448211    10.40   0.000     1.311145    1.486956
                1.other_neuro |   1.140039   .0395423     3.78   0.000     1.065113    1.220235
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |   1.084915   .0206311     4.29   0.000     1.045223    1.126114
         Stage 4 egfr 15-<30  |    .988788   .0364881    -0.31   0.760     .9197976    1.062953
Stage 5 egfr <15 or dialysis  |   .9872782   .0611335    -0.21   0.836     .8744442    1.114672
                              |
           1.organ_transplant |   1.594718   .1971644     3.77   0.000      1.25154    2.031996
                     1.spleen |   .8569471    .119659    -1.11   0.269     .6517744    1.126706
           1.ra_sle_psoriasis |    1.10696   .0320648     3.51   0.000     1.045865    1.171624
    1.other_immunosuppression |   1.018428   .1311356     0.14   0.887      .791275    1.310791
                        _cons |   .0623507   .0044739   -38.67   0.000     .0541708    .0717658
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_deathsonlyanalysis_FULL_agelin_bmicat_noeth, replace
file ./analysis/output/models/an_deathsonlyanalysis_FULL_agelin_bmicat_noeth.ster saved
. }

. else di "WARNING GROUP MODEL DID NOT FIT (OUTCOME `outcome')"

.  
. 
. *Complete case ethnicity model
. baselogistic, age("age1 age2 age3") bp("i.htdiag_or_highbp") ethnicity(1)

. if _rc==0{
. estimates

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =    108,070
                                                LR chi2(42)       =    3821.29
                                                Prob > chi2       =     0.0000
Log likelihood = -37327.817                     Pseudo R2         =     0.0487

-----------------------------------------------------------------------------------------------
                   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.032292   .0196446     1.67   0.095     .9944989    1.071522
                         age2 |    .991714   .0418145    -0.20   0.844     .9130541     1.07715
                         age3 |   .9771749   .0962606    -0.23   0.815     .8056033    1.185287
                       1.male |   1.318718    .026876    13.57   0.000      1.26708     1.37246
                              |
                    obese4cat |
           Obese I (30-34.9)  |    1.39497   .0378271    12.28   0.000     1.322766    1.471115
          Obese II (35-39.9)  |   1.608665   .0643042    11.89   0.000     1.487441    1.739767
             Obese III (40+)  |   1.665915   .0906653     9.38   0.000     1.497363    1.853439
                              |
                 smoke_nomiss |
                      Former  |   1.080528   .0240698     3.48   0.001     1.034367    1.128749
                     Current  |   .5032711    .021169   -16.32   0.000     .4634449    .5465197
                              |
                    ethnicity |
                       Mixed  |   1.769328   .2290765     4.41   0.000     1.372785    2.280417
      Asian or Asian British  |   2.522214   .1055685    22.10   0.000     2.323563    2.737848
                       Black  |   2.170458   .1483869    11.34   0.000     1.898269    2.481677
                       Other  |   2.153948   .2077854     7.95   0.000      1.78288    2.602245
                              |
                          imd |
                           2  |   1.059453   .0349641     1.75   0.080     .9930936    1.130246
                           3  |   1.078046   .0353065     2.29   0.022     1.011021    1.149515
                           4  |   1.230703   .0393242     6.50   0.000     1.155993    1.310242
             5 most deprived  |   1.359512   .0431459     9.68   0.000     1.277524    1.446762
                              |
           1.htdiag_or_highbp |   .9263383   .0213834    -3.31   0.001     .8853616    .9692116
1.chronic_respiratory_disease |   .9951384   .0242934    -0.20   0.842     .9486454     1.04391
                              |
                    asthmacat |
                 Yes, no OCS  |   1.013143   .0311578     0.42   0.671     .9538785    1.076089
                Yes with OCS  |   1.227132     .06764     3.71   0.000      1.10147     1.36713
                              |
    1.chronic_cardiac_disease |   .8626775   .0182204    -6.99   0.000     .8276952    .8991382
                              |
                      diabcat |
         Controlled diabetes  |   1.109428    .027697     4.16   0.000      1.05645    1.165063
       Uncontrolled diabetes  |   1.253846   .0407978     6.95   0.000      1.17638    1.336413
  Diabetes, no hba1c measure  |   1.049741    .053039     0.96   0.337     .9507677    1.159017
                              |
            cancer_exhaem_cat |
                   Last year  |   .2098457    .014814   -22.12   0.000       .18273    .2409853
               2-5 years ago  |   .4067121   .0191583   -19.10   0.000     .3708438    .4460497
                    5+ years  |   .6833365   .0213009   -12.22   0.000     .6428373    .7263872
                              |
              cancer_haem_cat |
                   Last year  |   .4581075   .0776489    -4.61   0.000     .3286164    .6386244
               2-5 years ago  |   .9233545   .0881184    -0.84   0.403      .765836    1.113272
                    5+ years  |   1.032336   .0780494     0.42   0.674     .8901568    1.197226
                              |
      1.chronic_liver_disease |   .5818812   .0433414    -7.27   0.000     .5028432    .6733425
                     1.stroke |    1.07609   .0281051     2.81   0.005     1.022391    1.132609
                   1.dementia |   1.383893   .0515028     8.73   0.000     1.286543    1.488609
                1.other_neuro |   1.124124   .0454037     2.90   0.004     1.038565     1.21673
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |   1.107482   .0246924     4.58   0.000     1.060128    1.156951
         Stage 4 egfr 15-<30  |   .9954875   .0429051    -0.10   0.916      .914849    1.083234
Stage 5 egfr <15 or dialysis  |    .854389   .0628301    -2.14   0.032     .7397074    .9868505
                              |
           1.organ_transplant |   1.652821   .2388067     3.48   0.001     1.245204    2.193871
                     1.spleen |   .7983028   .1317723    -1.36   0.172     .5776484    1.103244
           1.ra_sle_psoriasis |   1.086205    .036767     2.44   0.015     1.016482    1.160711
    1.other_immunosuppression |   1.019715   .1465294     0.14   0.892     .7694215     1.35143
                        _cons |   .0160191   .0110202    -6.01   0.000     .0041597    .0616901
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_deathsonlyanalysis_FULL_agespline_bmicat_CCeth, replace
file ./analysis/output/models/an_deathsonlyanalysis_FULL_agespline_bmicat_CCeth.ster saved
.  }

.  else di "WARNING CC ETHNICITY MODEL WITH AGESPLINE DID NOT FIT (OUTCOME `outcome')"

. 
.  log close
      name:  <unnamed>
       log:  e:\analyses\covid-vs-noncovid-deaths-research\analysis/output/an_deathsonlyanalysis.log
  log type:  text
 closed on:  14 Dec 2020, 18:57:50
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
