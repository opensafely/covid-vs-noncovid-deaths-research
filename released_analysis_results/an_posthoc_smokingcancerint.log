------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  E:\analyses\covid-vs-noncovid-deaths-research\analysis/output/an_posthoc_smokingcancerint.log
  log type:  text
 opened on:  23 Feb 2021, 17:51:18

. 
. /*
> use  ./analysis/cr_create_analysis_dataset_MAIN_STSET.dta, clear
> gen coviddeath = onsdeath==1
> gen noncoviddeath = onsdeath>1 & onsdeath<.
> 
> logistic coviddeath age1 age2 age3 male i.stp i.smoke_nomiss##i.cancer_exhaem
> estimates save ./analysis/output/models/an_posthoc_smokingcancerint_COV, replace
> testparm i.smoke_nomiss#i.cancer_exhaem
> 
> logistic noncoviddeath age1 age2 age3 male i.stp i.smoke_nomiss##i.cancer_exhaem
> estimates save ./analysis/output/models/an_posthoc_smokingcancerint_NONCOV, replace
> testparm i.smoke_nomiss#i.cancer_exhaem
> */
. 
. use  ./analysis/cr_create_analysis_dataset_MAIN_STSET.dta, clear

. 
. keep if _d==1
(17,305,136 observations deleted)

. gen coviddeath = onsdeath==1

. 
. gen hoc = (cancer_ex == 2)|(cancer_ex == 3)|(cancer_ex == 4)|(cancer_h == 2)|(cancer_h == 3)|(cancer_h == 4)

. logistic coviddeath age1 age2 age3 i.male i.stp i.cancer_exhaem  i.cancer_haem i.smoke_nomiss 1.hoc#2.smoke_nomiss 1.hoc#3.smoke_nomiss 

Logistic regression                             Number of obs     =    151,379
                                                LR chi2(45)       =    5549.47
                                                Prob > chi2       =     0.0000
Log likelihood = -50534.686                     Pseudo R2         =     0.0520

-----------------------------------------------------------------------------------
       coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------+----------------------------------------------------------------
             age1 |   1.038414   .0171438     2.28   0.022     1.005351    1.072565
             age2 |   .9835412   .0360024    -0.45   0.650     .9154496    1.056697
             age3 |   .9839737   .0841534    -0.19   0.850     .8321187    1.163541
           1.male |   1.336819   .0231126    16.79   0.000     1.292278    1.382895
                  |
              stp |
               2  |   .6102194   .4821185    -0.63   0.532     .1297101    2.870769
               3  |   .4003729   .3165608    -1.16   0.247      .085006    1.885731
               4  |   .8047824   .6378164    -0.27   0.784     .1702446    3.804377
               5  |   .7358637   .5843606    -0.39   0.699     .1551834     3.48939
               6  |   .6227587    .492232    -0.60   0.549     .1322895    2.931665
               7  |   .6035279   .4821144    -0.63   0.527     .1261056    2.888419
               8  |   .5820682   .4602014    -0.68   0.494     .1235911    2.741325
               9  |   .1885899   .1494431    -2.11   0.035      .039903    .8913144
              10  |     .53545   .4233512    -0.79   0.429     .1136894    2.521841
              11  |   .5125363   .4052764    -0.85   0.398     .1088069    2.414309
              12  |   .7350223   .5819965    -0.39   0.697     .1557086    3.469673
              13  |   .6723412    .531947    -0.50   0.616     .1426037    3.169922
              14  |   .5954389   .4711309    -0.66   0.512     .1262812    2.807604
              15  |   .3729084   .2951424    -1.25   0.213     .0790514    1.759117
              16  |   .2470492   .1954977    -1.77   0.077     .0523843    1.165107
              17  |     .38294   .3029759    -1.21   0.225      .081222    1.805459
              18  |   .6428135    .508302    -0.56   0.576     .1364587    3.028091
              19  |   .5213152   .4123291    -0.82   0.410     .1106244    2.456687
              20  |   .5707652   .4511585    -0.71   0.478     .1212354    2.687111
              21  |   .9305249   .7356109    -0.09   0.927     .1976172    4.381584
              22  |   .7793274   .6258554    -0.31   0.756     .1614896    3.760931
              23  |   .3164046   .2503381    -1.45   0.146     .0671082    1.491799
              24  |   .5063173   .4082192    -0.84   0.399     .1042654    2.458699
              25  |    .160305   .1280895    -2.29   0.022     .0334816    .7675173
              26  |   .1372246   .1088169    -2.50   0.012      .029003     .649264
              27  |   .3529592   .2792263    -1.32   0.188     .0748752    1.663837
              28  |   .1865187   .1477301    -2.12   0.034     .0394946    .8808603
              29  |    .296202   .2346088    -1.54   0.125     .0627174    1.398904
              30  |   .4552103   .3603492    -0.99   0.320       .09647    2.147989
              31  |   .3651634    .306205    -1.20   0.230      .070586    1.889103
              32  |    .598439   .4728434    -0.65   0.516     .1271926    2.815646
                  |
cancer_exhaem_cat |
       Last year  |   .1917685    .013032   -24.30   0.000     .1678543    .2190899
   2-5 years ago  |    .348281   .0178415   -20.59   0.000     .3150105    .3850654
        5+ years  |   .6220168    .024697   -11.96   0.000     .5754471    .6723553
                  |
  cancer_haem_cat |
       Last year  |   .4980796   .0691182    -5.02   0.000     .3794705    .6537617
   2-5 years ago  |   .8160142   .0709307    -2.34   0.019     .6881901    .9675802
        5+ years  |   .9074037   .0634914    -1.39   0.165     .7911187    1.040781
                  |
     smoke_nomiss |
          Former  |   1.051467   .0212605     2.48   0.013     1.010612    1.093973
         Current  |   .4344917   .0169544   -21.36   0.000     .4025007    .4690253
                  |
 hoc#smoke_nomiss |
        1#Former  |   1.085468   .0486675     1.83   0.067     .9941523    1.185171
       1#Current  |   1.323351   .1185083     3.13   0.002     1.110321    1.577254
                  |
            _cons |   .0382307   .0378686    -3.30   0.001     .0054862    .2664106
-----------------------------------------------------------------------------------
Note: _cons estimates baseline odds.

. lincom 3.smoke_nomiss+ 1.hoc#3.smoke_nomiss, or

 ( 1)  [coviddeath]3.smoke_nomiss + [coviddeath]1.hoc#3.smoke_nomiss = 0

------------------------------------------------------------------------------
  coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         (1) |    .574985   .0468796    -6.79   0.000     .4900681    .6746158
------------------------------------------------------------------------------

. 
. log close
      name:  <unnamed>
       log:  E:\analyses\covid-vs-noncovid-deaths-research\analysis/output/an_posthoc_smokingcancerint.log
  log type:  text
 closed on:  23 Feb 2021, 17:51:32
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
