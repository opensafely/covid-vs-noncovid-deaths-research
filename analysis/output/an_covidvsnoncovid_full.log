-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  c:\github\covid-vs-noncovid-deaths-research\analysis/output/an_covidvsnoncovid_full.log
  log type:  text
 opened on:  10 Dec 2020, 21:22:49

. 
. use  ./analysis/cr_create_analysis_dataset_STSET_ONSCSDEATH.dta, clear
(covid vs noncovid 2020)

.         
. assert onsdeath>=1 & onsdeath<. if _d==1

.                 
. gen coviddeath = onsdeath==1 

. gen noncoviddeath = onsdeath>1 & onsdeath<. 

.         
. tab coviddeath

 coviddeath |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     78,257       99.18       99.18
          1 |        649        0.82      100.00
------------+-----------------------------------
      Total |     78,906      100.00

. tab noncoviddeath

noncoviddea |
         th |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |     76,465       96.91       96.91
          1 |      2,441        3.09      100.00
------------+-----------------------------------
      Total |     78,906      100.00

.         
. **MULTIVARIATE
. cap prog drop baselogistic 

. prog define baselogistic
  1.         syntax , outcome(string) age(string) bp(string) [ethnicity(real 0) if(string)] 
  2. 
.         if `ethnicity'==1 local ethnicity "i.ethnicity"
  3.         else local ethnicity
  4. 
. cap logistic `outcome' `age'                    ///
>                         i.male                                                  ///
>                         i.obese4cat                                             ///
>                         i.smoke_nomiss                                  ///
>                         `ethnicity'                                             ///
>                         i.imd                                                   ///
>                         `bp'                                                    ///
>                         i.chronic_respiratory_disease   ///
>                         i.asthmacat                                             ///
>                         i.chronic_cardiac_disease               ///
>                         i.diabcat                                               ///
>                         i.cancer_exhaem_cat                             ///
>                         i.cancer_haem_cat                               ///
>                         i.chronic_liver_disease                 ///
>                         i.stroke                                                ///     
>                         i.dementia                                              ///
>                         i.other_neuro                                   ///
>                         i.reduced_kidney_function_cat2  ///
>                         i.organ_transplant                              ///
>                         i.spleen                                                ///
>                         i.ra_sle_psoriasis                      ///
>                         i.other_immunosuppression
  5.                         
. end                     

. 
. baselogistic, outcome(coviddeath) age("age1 age2 age3")  bp("i.htdiag_or_highbp") ethnicity(0)

. if _rc==0{
. estimates

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

note: 3.diabcat != 0 predicts failure perfectly
      3.diabcat dropped and 104 obs not used

Logistic regression                             Number of obs     =     78,802
                                                LR chi2(34)       =      34.31
                                                Prob > chi2       =     0.4529
Log likelihood = -3743.8861                     Pseudo R2         =     0.0046

-----------------------------------------------------------------------------------------------
                   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.017084   .0112977     1.53   0.127     .9951801     1.03947
                         age2 |   .9508782   .0376861    -1.27   0.204     .8798109    1.027686
                         age3 |   1.130913   .1182221     1.18   0.239     .9213981    1.388069
                       1.male |   1.015852   .0804009     0.20   0.842     .8698834    1.186315
                              |
                    obese4cat |
           Obese I (30-34.9)  |   1.004525   .1096608     0.04   0.967     .8110316    1.244181
          Obese II (35-39.9)  |   .8713374   .0996021    -1.20   0.228     .6964436    1.090151
             Obese III (40+)  |   .9243731   .0956203    -0.76   0.447     .7547378    1.132136
                              |
                 smoke_nomiss |
                      Former  |   .8932194   .2616466    -0.39   0.700     .5030598    1.585976
                     Current  |   .8758301   .1114123    -1.04   0.297     .6825595    1.123826
                              |
                          imd |
                           4  |   1.039013   .1041621     0.38   0.703     .8536643    1.264605
             5 most deprived  |   1.235247   .1525406     1.71   0.087     .9697035    1.573507
                              |
           1.htdiag_or_highbp |   1.350704   .2238884     1.81   0.070     .9760401    1.869186
1.chronic_respiratory_disease |    1.04779   .1026606     0.48   0.634     .8647194    1.269619
                              |
                    asthmacat |
                 Yes, no OCS  |   1.161572   .3051285     0.57   0.569     .6941407    1.943769
                Yes with OCS  |   1.126865   .3060954     0.44   0.660      .661692    1.919055
                              |
    1.chronic_cardiac_disease |   1.237933   .1155928     2.29   0.022     1.030898    1.486547
                              |
                      diabcat |
         Controlled diabetes  |   1.276827   .4886585     0.64   0.523     .6030676    2.703324
       Uncontrolled diabetes  |          1  (empty)
  Diabetes, no hba1c measure  |   1.106405   .1088831     1.03   0.304     .9123173    1.341783
                              |
            cancer_exhaem_cat |
                   Last year  |   1.322021    .506935     0.73   0.467     .6235067     2.80308
               2-5 years ago  |   1.045613   .2404641     0.19   0.846     .6662181    1.641064
                    5+ years  |   .9823965   .0843904    -0.21   0.836     .8301688    1.162538
                              |
              cancer_haem_cat |
                   Last year  |   1.576861   .7971549     0.90   0.368     .5854413    4.247209
               2-5 years ago  |    .580505   .2389736    -1.32   0.186     .2590574    1.300816
                    5+ years  |   .9162761   .0975019    -0.82   0.411     .7437878    1.128765
                              |
      1.chronic_liver_disease |   1.086359   .1052755     0.85   0.393     .8984346    1.313593
                     1.stroke |   .8866104   .0912227    -1.17   0.242     .7246918    1.084707
                   1.dementia |   1.110713   .1070719     1.09   0.276     .9194888    1.341705
                1.other_neuro |   .9771463   .0977077    -0.23   0.817     .8032404    1.188704
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |   .8378234   .3824968    -0.39   0.698     .3424112    2.050014
Stage 5 egfr <15 or dialysis  |   .8910693   .0914595    -1.12   0.261     .7286921     1.08963
                              |
           1.organ_transplant |   .8263217   .0867985    -1.82   0.069     .6725695    1.015222
                     1.spleen |   .8957923   .0751289    -1.31   0.189     .7600082    1.055836
           1.ra_sle_psoriasis |   1.088133   .1054496     0.87   0.383     .8998976    1.315742
    1.other_immunosuppression |   1.030632    .084414     0.37   0.713     .8777801      1.2101
                        _cons |   .0037757   .0014336   -14.69   0.000     .0017939    .0079469
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_covidvsnoncovid_full_covid_agespline_bmicat_noeth, replace
file ./analysis/output/models/an_covidvsnoncovid_full_covid_agespline_bmicat_noeth.ster saved
. }

. else di "WARNING AGE SPLINE MODEL DID NOT FIT (OUTCOME `outcome')"

.  
. *Age group model (not adj ethnicity)
. baselogistic, outcome(coviddeath) age("ib3.agegroup") bp("i.htdiag_or_highbp") ethnicity(0)

. if _rc==0{
. estimates

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

note: 3.diabcat != 0 predicts failure perfectly
      3.diabcat dropped and 104 obs not used

Logistic regression                             Number of obs     =     78,802
                                                LR chi2(36)       =      33.82
                                                Prob > chi2       =     0.5728
Log likelihood = -3744.1313                     Pseudo R2         =     0.0045

-----------------------------------------------------------------------------------------------
                   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                     agegroup |
                      18-<40  |   .9963628   .1170018    -0.03   0.975     .7915199    1.254218
                      40-<50  |   1.139051   .1527054     0.97   0.331     .8758465    1.481353
                      60-<70  |   .9653068   .1420475    -0.24   0.810     .7234504    1.288018
                      70-<80  |   1.108654   .1696312     0.67   0.500     .8214041    1.496358
                         80+  |   1.095075   .1992384     0.50   0.618     .7666124     1.56427
                              |
                       1.male |   1.015453   .0803672     0.19   0.846     .8695455    1.185844
                              |
                    obese4cat |
           Obese I (30-34.9)  |   1.003337   .1095371     0.03   0.976     .8100629    1.242724
          Obese II (35-39.9)  |   .8706936   .0995311    -1.21   0.226     .6959249    1.089352
             Obese III (40+)  |    .923415   .0955231    -0.77   0.441     .7539525    1.130967
                              |
                 smoke_nomiss |
                      Former  |   .8898947   .2606786    -0.40   0.690     .5011809    1.580093
                     Current  |   .8753022   .1113476    -1.05   0.295     .6821443    1.123155
                              |
                          imd |
                           4  |   1.038692   .1041306     0.38   0.705     .8533994    1.264215
             5 most deprived  |   1.234886   .1525078     1.71   0.088     .9694021    1.573077
                              |
           1.htdiag_or_highbp |   1.349155   .2236355     1.81   0.071     .9749156    1.867054
1.chronic_respiratory_disease |   1.048395   .1027228     0.48   0.630     .8652139     1.27036
                              |
                    asthmacat |
                 Yes, no OCS  |   1.162597   .3054046     0.57   0.566     .6947453    1.945507
                Yes with OCS  |   1.123589   .3052027     0.43   0.668     .6597721    1.913467
                              |
    1.chronic_cardiac_disease |   1.238557   .1156524     2.29   0.022     1.031415      1.4873
                              |
                      diabcat |
         Controlled diabetes  |   1.276917   .4886974     0.64   0.523     .6031057    2.703533
       Uncontrolled diabetes  |          1  (empty)
  Diabetes, no hba1c measure  |    1.10712   .1089495     1.03   0.301     .9129134    1.342641
                              |
            cancer_exhaem_cat |
                   Last year  |   1.322378   .5070669     0.73   0.466     .6236797    2.803816
               2-5 years ago  |   1.043929   .2400736     0.19   0.852     .6651494    1.638411
                    5+ years  |   .9829048   .0844366    -0.20   0.841      .830594    1.163146
                              |
              cancer_haem_cat |
                   Last year  |   1.572145   .7947755     0.89   0.371      .583687    4.234532
               2-5 years ago  |   .5802656   .2388763    -1.32   0.186     .2589495    1.300285
                    5+ years  |   .9179627   .0976814    -0.80   0.421     .7451569    1.130843
                              |
      1.chronic_liver_disease |   1.086803   .1053248     0.86   0.390     .8987911    1.314144
                     1.stroke |   .8869956    .091263    -1.17   0.244     .7250055     1.08518
                   1.dementia |   1.110587   .1070624     1.09   0.277     .9193806    1.341559
                1.other_neuro |   .9771658     .09771    -0.23   0.817     .8032557    1.188729
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |   .8455193   .3858196    -0.37   0.713     .3457093    2.067931
Stage 5 egfr <15 or dialysis  |   .8916069   .0915171    -1.12   0.264     .7291278    1.090293
                              |
           1.organ_transplant |   .8264394   .0868128    -1.81   0.070     .6726624    1.015371
                     1.spleen |   .8955113   .0751053    -1.32   0.188     .7597696    1.055505
           1.ra_sle_psoriasis |   1.087728   .1054119     0.87   0.386     .8995602    1.315256
    1.other_immunosuppression |   1.030693    .084421     0.37   0.712     .8778291    1.210177
                        _cons |   .0061663    .001307   -24.01   0.000     .0040701    .0093421
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_covidvsnoncovid_full_covid_agegroup_bmicat_noeth, replace
file ./analysis/output/models/an_covidvsnoncovid_full_covid_agegroup_bmicat_noeth.ster saved
. }

. else di "WARNING GROUP MODEL DID NOT FIT (OUTCOME `outcome')"

. 
. *Complete case ethnicity model
. baselogistic, outcome(coviddeath) age("age1 age2 age3") bp("i.htdiag_or_highbp") ethnicity(1)

. if _rc==0{
. estimates

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

note: 3.diabcat != 0 predicts failure perfectly
      3.diabcat dropped and 76 obs not used

Logistic regression                             Number of obs     =     59,138
                                                LR chi2(38)       =      34.73
                                                Prob > chi2       =     0.6215
Log likelihood = -2732.8131                     Pseudo R2         =     0.0063

-----------------------------------------------------------------------------------------------
                   coviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.025823    .013685     1.91   0.056      .999349    1.052999
                         age2 |   .9320298   .0438272    -1.50   0.134     .8499696    1.022012
                         age3 |    1.17794   .1456508     1.32   0.185     .9244284    1.500974
                       1.male |   1.077679   .1000718     0.81   0.420     .8983555    1.292799
                              |
                    obese4cat |
           Obese I (30-34.9)  |   .9365468   .1232712    -0.50   0.618     .7235885    1.212181
          Obese II (35-39.9)  |   .8868607   .1182825    -0.90   0.368     .6828555    1.151813
             Obese III (40+)  |   .9814282   .1169577    -0.16   0.875     .7769984    1.239644
                              |
                 smoke_nomiss |
                      Former  |   .9301688   .3147857    -0.21   0.831     .4791814    1.805608
                     Current  |   .8402048    .127452    -1.15   0.251     .6241155    1.131111
                              |
                    ethnicity |
                       Mixed  |   1.046349   .2176367     0.22   0.828     .6960332    1.572981
      Asian or Asian British  |   1.132291   .2272956     0.62   0.536     .7639907    1.678139
                       Black  |   .9155891   .2020975    -0.40   0.690     .5940395    1.411191
                       Other  |   1.001407   .1562595     0.01   0.993     .7375466    1.359666
                              |
                          imd |
                           4  |   1.053128   .1224558     0.45   0.656     .8385034    1.322687
             5 most deprived  |   1.099486    .166483     0.63   0.531     .8171495    1.479373
                              |
           1.htdiag_or_highbp |   1.227955   .2290711     1.10   0.271     .8519096    1.769992
1.chronic_respiratory_disease |   1.089257   .1242162     0.75   0.453     .8710869     1.36207
                              |
                    asthmacat |
                 Yes, no OCS  |   1.351761   .3825946     1.06   0.287     .7762125    2.354068
                Yes with OCS  |   1.138193   .3658204     0.40   0.687     .6062275    2.136957
                              |
    1.chronic_cardiac_disease |   1.313672     .14159     2.53   0.011     1.063513    1.622673
                              |
                      diabcat |
         Controlled diabetes  |   1.309532   .5930513     0.60   0.552     .5390513    3.181281
       Uncontrolled diabetes  |          1  (empty)
  Diabetes, no hba1c measure  |   1.130847    .130136     1.07   0.285     .9025039    1.416964
                              |
            cancer_exhaem_cat |
                   Last year  |   1.319783   .5986812     0.61   0.541     .5424752     3.21089
               2-5 years ago  |   .9876841   .2712239    -0.05   0.964     .5765979    1.691855
                    5+ years  |   .9927749   .0997427    -0.07   0.942     .8153269    1.208843
                              |
              cancer_haem_cat |
                   Last year  |   2.072186   1.051563     1.44   0.151     .7664318    5.602529
               2-5 years ago  |   .2697644    .191483    -1.85   0.065     .0671102    1.084378
                    5+ years  |   .8908128   .1121772    -0.92   0.359     .6959809    1.140186
                              |
      1.chronic_liver_disease |   1.052985   .1209842     0.45   0.653     .8406633    1.318931
                     1.stroke |   .8925546   .1073718    -0.94   0.345     .7050788    1.129879
                   1.dementia |   1.121453   .1264902     1.02   0.310     .8990273    1.398908
                1.other_neuro |   .9596837   .1129465    -0.35   0.727     .7619896    1.208668
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |   .9136488   .4669653    -0.18   0.860     .3355295    2.487871
Stage 5 egfr <15 or dialysis  |   .8610284    .105155    -1.23   0.221     .6777391    1.093887
                              |
           1.organ_transplant |   .8444278   .1035059    -1.38   0.168      .664089    1.073739
                     1.spleen |   .9036077    .088679    -1.03   0.302     .7454938    1.095256
           1.ra_sle_psoriasis |   .9890251   .1154657    -0.09   0.925     .7867415    1.243319
    1.other_immunosuppression |   .9634261   .0934235    -0.38   0.701     .7966679     1.16509
                        _cons |   .0030333   .0013768   -12.77   0.000     .0012461    .0073837
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_covidvsnoncovid_full_covid_agespline_bmicat_CCeth, replace
file ./analysis/output/models/an_covidvsnoncovid_full_covid_agespline_bmicat_CCeth.ster saved
.  }

.  else di "WARNING CC ETHNICITY MODEL WITH AGESPLINE DID NOT FIT (OUTCOME `outcome')"

.  
.  ***
. 
. baselogistic, outcome(noncoviddeath) age("age1 age2 age3")  bp("i.htdiag_or_highbp") ethnicity(0)

. if _rc==0{
. estimates

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =     78,906
                                                LR chi2(35)       =      34.55
                                                Prob > chi2       =     0.4895
Log likelihood =  -10870.12                     Pseudo R2         =     0.0016

-----------------------------------------------------------------------------------------------
                noncoviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.005926   .0056498     1.05   0.293     .9949138    1.017061
                         age2 |   .9764934   .0199219    -1.17   0.244     .9382175    1.016331
                         age3 |   1.064197    .057592     1.15   0.250     .9570986    1.183279
                       1.male |   1.014023    .041895     0.34   0.736     .9351473    1.099552
                              |
                    obese4cat |
           Obese I (30-34.9)  |   1.089813   .0629529     1.49   0.137     .9731555    1.220454
          Obese II (35-39.9)  |   1.051556   .0612254     0.86   0.388     .9381497     1.17867
             Obese III (40+)  |   1.081694   .0578814     1.47   0.142     .9739944    1.201302
                              |
                 smoke_nomiss |
                      Former  |   1.340464   .1711834     2.29   0.022     1.043645      1.7217
                     Current  |   .9757817   .0624015    -0.38   0.701     .8608313    1.106082
                              |
                          imd |
                           4  |   .9866882   .0520333    -0.25   0.799     .8897983    1.094128
             5 most deprived  |   1.113059   .0743341     1.60   0.109     .9764993    1.268717
                              |
           1.htdiag_or_highbp |   .9319477   .0690318    -0.95   0.341     .8060107    1.077562
1.chronic_respiratory_disease |   1.013228   .0523203     0.25   0.799     .9157003    1.121143
                              |
                    asthmacat |
                 Yes, no OCS  |   .9384427   .1418568    -0.42   0.674     .6978121    1.262051
                Yes with OCS  |      .8766   .1384247    -0.83   0.404     .6432614     1.19458
                              |
    1.chronic_cardiac_disease |   .9666074   .0504884    -0.65   0.516     .8725486    1.070806
                              |
                      diabcat |
         Controlled diabetes  |   .8871156   .2074666    -0.51   0.609     .5609352    1.402968
       Uncontrolled diabetes  |   .2993603   .3009096    -1.20   0.230     .0417434    2.146846
  Diabetes, no hba1c measure  |   .9283042   .0500892    -1.38   0.168      .835144    1.031856
                              |
            cancer_exhaem_cat |
                   Last year  |   .5319234   .1623738    -2.07   0.039     .2924241    .9675761
               2-5 years ago  |   .8736628   .1113189    -1.06   0.289     .6805921    1.121504
                    5+ years  |   .8989298   .0406772    -2.35   0.019     .8226372    .9822979
                              |
              cancer_haem_cat |
                   Last year  |   .9360951   .3175419    -0.19   0.846     .4814771     1.81997
               2-5 years ago  |   .8612002   .1533003    -0.84   0.401     .6075522    1.220744
                    5+ years  |   .9499181   .0521343    -0.94   0.349     .8530407    1.057798
                              |
      1.chronic_liver_disease |   1.011017   .0521628     0.21   0.832     .9137794    1.118602
                     1.stroke |    .992448   .0514393    -0.15   0.884     .8965808    1.098566
                   1.dementia |   1.021242   .0526557     0.41   0.684     .9230821     1.12984
                1.other_neuro |   .9974637   .0517027    -0.05   0.961     .9011058    1.104125
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |   1.098141   .2378825     0.43   0.666     .7182379    1.678989
Stage 5 egfr <15 or dialysis  |   .9896148   .0513509    -0.20   0.841     .8939177    1.095557
                              |
           1.organ_transplant |   .9725696   .0505977    -0.53   0.593     .8782884    1.076972
                     1.spleen |   1.004535   .0431678     0.11   0.916     .9233928    1.092808
           1.ra_sle_psoriasis |    .927707   .0491307    -1.42   0.157     .8362418    1.029176
    1.other_immunosuppression |   .9739921   .0419231    -0.61   0.540     .8951948    1.059725
                        _cons |   .0302469   .0056434   -18.75   0.000     .0209829     .043601
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_covidvsnoncovid_full_noncovid_agespline_bmicat_noeth, replace
file ./analysis/output/models/an_covidvsnoncovid_full_noncovid_agespline_bmicat_noeth.ster saved
. }

. else di "WARNING AGE SPLINE MODEL DID NOT FIT (OUTCOME `outcome')"

.  
. *Age group model (not adj ethnicity)
. baselogistic, outcome(noncoviddeath) age("ib3.agegroup") bp("i.htdiag_or_highbp") ethnicity(0)

. if _rc==0{
. estimates

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =     78,906
                                                LR chi2(37)       =      37.52
                                                Prob > chi2       =     0.4454
Log likelihood = -10868.637                     Pseudo R2         =     0.0017

-----------------------------------------------------------------------------------------------
                noncoviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                     agegroup |
                      18-<40  |   1.012894   .0613976     0.21   0.833     .8994306    1.140671
                      40-<50  |   1.070264   .0753916     0.96   0.335     .9322457    1.228715
                      60-<70  |   1.002688   .0755701     0.04   0.972     .8649934    1.162301
                      70-<80  |   .9353313   .0779024    -0.80   0.422     .7944565    1.101186
                         80+  |   1.121265    .104522     1.23   0.220     .9340306    1.346032
                              |
                       1.male |   1.013829   .0418866     0.33   0.740     .9349689    1.099341
                              |
                    obese4cat |
           Obese I (30-34.9)  |   1.089704   .0629514     1.49   0.137       .97305    1.220342
          Obese II (35-39.9)  |   1.051528   .0612266     0.86   0.388       .93812    1.178645
             Obese III (40+)  |   1.080983   .0578468     1.46   0.146     .9733482     1.20052
                              |
                 smoke_nomiss |
                      Former  |   1.340293   .1711675     2.29   0.022     1.043503    1.721496
                     Current  |   .9757913   .0624047    -0.38   0.702     .8608354    1.106098
                              |
                          imd |
                           4  |   .9866632   .0520329    -0.25   0.799     .8897741    1.094103
             5 most deprived  |   1.114065   .0744072     1.62   0.106      .977372    1.269877
                              |
           1.htdiag_or_highbp |   .9316446   .0690122    -0.96   0.339     .8057438    1.077218
1.chronic_respiratory_disease |   1.013519   .0523373     0.26   0.795     .9159602    1.121469
                              |
                    asthmacat |
                 Yes, no OCS  |   .9394324   .1420121    -0.41   0.679     .6985398    1.263397
                Yes with OCS  |    .875856   .1383088    -0.84   0.401     .6427131    1.193571
                              |
    1.chronic_cardiac_disease |   .9669444   .0505078    -0.64   0.520     .8728497    1.071183
                              |
                      diabcat |
         Controlled diabetes  |   .8893258   .2079887    -0.50   0.616     .5623262    1.406479
       Uncontrolled diabetes  |   .2984389   .2999875    -1.20   0.229     .0416138    2.140296
  Diabetes, no hba1c measure  |   .9283914   .0500943    -1.38   0.169     .8352218    1.031954
                              |
            cancer_exhaem_cat |
                   Last year  |    .532633   .1625924    -2.06   0.039      .292812    .9688739
               2-5 years ago  |   .8727296   .1112007    -1.07   0.285     .6798641    1.120308
                    5+ years  |   .8991289   .0406881    -2.35   0.019      .822816    .9825195
                              |
              cancer_haem_cat |
                   Last year  |   .9350648   .3171981    -0.20   0.843     .4809414    1.817989
               2-5 years ago  |   .8623081   .1535025    -0.83   0.405     .6083269    1.222328
                    5+ years  |   .9501964   .0521509    -0.93   0.352     .8532882     1.05811
                              |
      1.chronic_liver_disease |   1.010171   .0521225     0.20   0.845     .9130087    1.117673
                     1.stroke |   .9925482   .0514458    -0.14   0.885     .8966688     1.09868
                   1.dementia |   1.021351   .0526631     0.41   0.682     .9231775    1.129965
                1.other_neuro |   .9973089   .0516958    -0.05   0.959     .9009639    1.103957
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |   1.081833    .234212     0.36   0.716     .7077484    1.653642
Stage 5 egfr <15 or dialysis  |   .9889343   .0513187    -0.21   0.830     .8932974     1.09481
                              |
           1.organ_transplant |   .9726316   .0506034    -0.53   0.594     .8783399    1.077046
                     1.spleen |   1.004767   .0431789     0.11   0.912     .9236037    1.093062
           1.ra_sle_psoriasis |   .9280839   .0491523    -1.41   0.159     .8365785    1.029598
    1.other_immunosuppression |   .9743559   .0419411    -0.60   0.546     .8955249    1.060126
                        _cons |   .0347369   .0035076   -33.27   0.000     .0284997    .0423391
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_covidvsnoncovid_full_noncovid_agegroup_bmicat_noeth, replace
file ./analysis/output/models/an_covidvsnoncovid_full_noncovid_agegroup_bmicat_noeth.ster saved
. }

. else di "WARNING GROUP MODEL DID NOT FIT (OUTCOME `outcome')"

. 
. *Complete case ethnicity model
. baselogistic, outcome(noncoviddeath) age("age1 age2 age3") bp("i.htdiag_or_highbp") ethnicity(1)

. if _rc==0{
. estimates

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Logistic regression                             Number of obs     =     59,214
                                                LR chi2(39)       =      37.34
                                                Prob > chi2       =     0.5459
Log likelihood = -8124.6959                     Pseudo R2         =     0.0023

-----------------------------------------------------------------------------------------------
                noncoviddeath | Odds Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.007866   .0065418     1.21   0.227     .9951255    1.020769
                         age2 |   .9697333   .0228976    -1.30   0.193     .9258774    1.015666
                         age3 |   1.078428   .0676688     1.20   0.229     .9536305    1.219556
                       1.male |   .9598163   .0458879    -0.86   0.391     .8739629    1.054104
                              |
                    obese4cat |
           Obese I (30-34.9)  |   1.086494   .0724472     1.24   0.213     .9533871    1.238184
          Obese II (35-39.9)  |    1.03657   .0697178     0.53   0.593      .908549     1.18263
             Obese III (40+)  |   1.048628   .0651908     0.76   0.445     .9283343     1.18451
                              |
                 smoke_nomiss |
                      Former  |   1.299616   .1944688     1.75   0.080     .9692703    1.742549
                     Current  |   .9404838   .0706262    -0.82   0.414      .811764    1.089614
                              |
                    ethnicity |
                       Mixed  |   .9960956   .1096173    -0.04   0.972     .8028397    1.235871
      Asian or Asian British  |   1.136786   .1183165     1.23   0.218     .9270126    1.394028
                       Black  |   1.043526   .1120867     0.40   0.692     .8454241    1.288049
                       Other  |   1.034755   .0820986     0.43   0.667     .8857322    1.208852
                              |
                          imd |
                           4  |    .936913    .057754    -1.06   0.290      .830288    1.057231
             5 most deprived  |   1.050781   .0826992     0.63   0.529     .9005759    1.226038
                              |
           1.htdiag_or_highbp |   .9471849   .0816282    -0.63   0.529     .7999786    1.121479
1.chronic_respiratory_disease |   .9865446   .0596148    -0.22   0.823     .8763556    1.110588
                              |
                    asthmacat |
                 Yes, no OCS  |   .9297343   .1611262    -0.42   0.674     .6619767    1.305795
                Yes with OCS  |   .8566971   .1599847    -0.83   0.408     .5941127    1.235338
                              |
    1.chronic_cardiac_disease |   .8918149   .0551947    -1.85   0.064     .7899391    1.006829
                              |
                      diabcat |
         Controlled diabetes  |   .9658355   .2546564    -0.13   0.895     .5760652    1.619328
       Uncontrolled diabetes  |   .4116019   .4145523    -0.88   0.378     .0571708    2.963333
  Diabetes, no hba1c measure  |   .8795987   .0560729    -2.01   0.044     .7762863    .9966605
                              |
            cancer_exhaem_cat |
                   Last year  |   .3928742   .1618611    -2.27   0.023     .1752125    .8809309
               2-5 years ago  |   .8311722   .1253338    -1.23   0.220     .6184961    1.116979
                    5+ years  |   .9610759   .0496758    -0.77   0.442     .8684824    1.063541
                              |
              cancer_haem_cat |
                   Last year  |   .8037715   .3331851    -0.53   0.598     .3566863    1.811251
               2-5 years ago  |   .9565642   .1887043    -0.23   0.822     .6498229    1.408099
                    5+ years  |   .9557867    .060651    -0.71   0.476      .844008    1.082369
                              |
      1.chronic_liver_disease |   1.030476   .0613182     0.50   0.614     .9170379    1.157946
                     1.stroke |   1.029025   .0610368     0.48   0.630     .9160868    1.155886
                   1.dementia |   .9871664   .0594587    -0.21   0.830     .8772453    1.110861
                1.other_neuro |   .9760925   .0587811    -0.40   0.688     .8674229    1.098376
                              |
 reduced_kidney_function_cat2 |
Stage 3a/3b egfr 30-60        |    1.00525    .260194     0.02   0.984     .6052756    1.669533
Stage 5 egfr <15 or dialysis  |   1.037699   .0615726     0.62   0.533     .9237723    1.165677
                              |
           1.organ_transplant |   .9812593   .0590303    -0.31   0.753     .8721224    1.104054
                     1.spleen |   1.002426   .0498325     0.05   0.961     .9093638    1.105013
           1.ra_sle_psoriasis |   .8804464   .0547581    -2.05   0.041     .7794059    .9945856
    1.other_immunosuppression |   .9948544   .0494185    -0.10   0.917     .9025615    1.096585
                        _cons |   .0298435   .0064576   -16.23   0.000     .0195283    .0456073
-----------------------------------------------------------------------------------------------
Note: _cons estimates baseline odds.
. estimates save ./analysis/output/models/an_covidvsnoncovid_full_noncovid_agespline_bmicat_CCeth, replace
file ./analysis/output/models/an_covidvsnoncovid_full_noncovid_agespline_bmicat_CCeth.ster saved
.  }

.  else di "WARNING CC ETHNICITY MODEL WITH AGESPLINE DID NOT FIT (OUTCOME `outcome')"

.  
.  *** 
.  
.  log close
      name:  <unnamed>
       log:  c:\github\covid-vs-noncovid-deaths-research\analysis/output/an_covidvsnoncovid_full.log
  log type:  text
 closed on:  10 Dec 2020, 21:22:59
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
